# 加密技术浅析
*最近在看加密技术和加密算法相关的东西，记录一下所习心得*
加密算法大致分为三种 
- 不可解密的单向加密算法，如hash加密算法
- 对称加密算法： 通信双方使用相同的key进行加解密
- 非对称加密算法： 通信双方使用不同的公钥和私钥进行加解密
## hash加密算法
   哈希算法，是指将任意长度的二进制值映射为较短的固定长度的二进制值，这个小的二进制值称为哈希值。哈希值是一段数据唯一且极其紧凑的数值表示形式。如果散列一段明文而且哪怕只更改该段落的一个字母，随后的哈希都将产生不同的值。要找到散列为同一个值的两个不同的输入，在计算上是不可能的，所以数据的哈希值可以检验数据的完整性。一般用于快速查找和加密算法。<br/>
   典型的hash算法包括： ‘md5′,’sha’,’sha1′,’sha256′,’sha512′,’RSA-SHA’。在构建web应用时对用户名和密码进行加密通常使用hash算法。<br/>  
   在基于哈希加密的账户系统中，通常用户注册和认证的流程是这样的：
   - 用户注册一个帐号
   - 密码经过哈希加密储存在数据库中。只要密码被写入磁盘，任何时候都不允许是明文
   - 当用户登录的时候，从数据库取出已经加密的密码，和经过哈希的用户输入进行对比
   - 如果哈希值相同，用户获得登入授权，否则，会被告知输入了无效的登录信息
   - 每当有用户尝试登录，以上两步都会重复<br/>
**使用这种方式来做加密系统是远远不够的，因为现在已经存在多种方法破解hash加密系统，如下：**
- 暴力破解 就是靠猜，这是效率最低的方式。
- 查表法 构建一个超大型hash值和真实值的key-value表，和数据库保存的hash值一一比对，这种方式对于没有加盐（salt）的加密系统特别管用。
- 反向查表法
- 彩虹表 <br/>
**加盐**<br/>
查表法和彩虹表只有在所有密码都以相同方式进行哈希加密时才有效。如果两个用户密码相同，那么他们密码的哈希值也是相同的。我们可以通过“随机化”哈希来阻止这类攻击，比如可以在密码中混入一段“随机”的字符串再进行哈希加密，这个被字符串被称作盐值，这使得同一个密码每次都被加密为完全不同的字符串。为了校验密码是否正确，我们需要储存盐值。通常和密码哈希值一起存放在账户数据库中，或者直接存为哈希字符串的一部分。<br/>
**切忌使用重复盐值和短盐值** <br/>
存储密码的步骤
- 生成一个长度足够的盐值
- 将盐值混入密码，并使用标准的加密哈希函数进行加密，如SHA256
- 把哈希值和盐值一起存入数据库中对应此用户的那条记录<br/>
校验密码的步骤
- 从数据库取出用户的密码哈希值和对应盐值
- 将盐值混入用户输入的密码，并且使用同样的哈希函数进行加密
- 比较上一步的结果和数据库储存的哈希值是否相同，如果相同那么密码正确，反之密码错误
